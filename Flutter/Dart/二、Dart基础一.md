# äºŒã€DartåŸºç¡€ä¸€

åœ¨å­¦ä¹  `Dart` ä¹‹å‰ï¼Œè¯·ç‰¢è®°ä»¥ä¸‹é‡è¦æ¦‚å¿µï¼š

* åœ¨ `Dart` ä¸­ï¼Œå¯ä»¥åœ¨å˜é‡ä¸­æ”¾ç½®çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚å¶æ•°ï¼Œå‡½æ•°å’Œ `null` éƒ½æ˜¯å¯¹è±¡ã€‚é™¤ `null`ï¼ˆå¦‚æœå¯ç”¨`sound null safety`ï¼‰å¤–ï¼Œæ‰€æœ‰å¯¹è±¡å‡ä» `Object` ç±»ç»§æ‰¿ã€‚

* å°½ç®¡ `Dart` æ˜¯å¼ºç±»å‹çš„ï¼Œä½†ç±»å‹æ³¨è§£æ˜¯å¯é€‰çš„ï¼Œå› ä¸º`Dart`å¯ä»¥æ¨æ–­ç±»å‹ã€‚ å¦‚ä¸‹ a å’Œ b å‡æ˜¯ `int` ç±»å‹

```Dart
var a = 25; int b = 25;
print('$a $b');
```

* å¦‚æœå¯ç”¨`null safety`ï¼Œå˜é‡ä¸èƒ½åŒ…å«`null`ï¼Œé™¤éä½ è¯´å¯ä»¥ã€‚å¯ä»¥é€šè¿‡åœ¨å˜é‡ç±»å‹çš„æœ«å°¾æ·»åŠ  `?` æ¥ä½¿è¯¥å˜é‡å¯ä¸ºç©ºã€‚

```Dart
// å˜é‡cçš„ç±»å‹ä¸º int?ï¼Œå¯ä»¥æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ºnull
int? c = 25;
// å¦‚æœçŸ¥é“æŸä¸ªè¡¨è¾¾å¼æ°¸è¿œä¸ä¼šå–å€¼ä¸ºnullï¼Œåˆ™å¯ä»¥æ·»åŠ ï¼æ–­è¨€å®ƒä¸æ˜¯nullã€‚å¦‚æœä¸º null åˆ™æŠ›å¼‚å¸¸
int d = c!;
c = null;
print('$c $d');
// æ‰“å°ï¼šnull 25
```

* å½“ä½ æ˜ç¡®åœ°è¯´å…è®¸ä½¿ç”¨ä»»ä½•ç±»å‹æ—¶ï¼Œè¯·ä½¿ç”¨`Object?`(å¦‚æœä½ å¯ç”¨äº†`null safety`)ã€`Object`ç±»å‹ï¼›å¦‚æœå¿…é¡»å°†ç±»å‹æ£€æŸ¥æ¨è¿Ÿåˆ°è¿è¡Œæ—¶ï¼Œåˆ™ç”¨ç‰¹æ®Šç±»å‹`dynamic`ã€‚

```Dart
Object? obj = 12;
obj = "abc";
print('$obj');      // æ‰“å°ï¼šabc
```

* `Dart`æ”¯æŒæ³›å‹ï¼Œå¦‚ä¸‹å®šä¹‰å­˜å‚¨æ•´æ•°çš„åˆ—è¡¨

```Dart
List<int> arr = [1, 2, 3];
print('$arr');
```

* `Dart`æ”¯æŒ`top-level`å‡½æ•°(å¦‚ï¼š`main()`) ä»¥åŠä¸ç±»æˆ–å¯¹è±¡ç»‘å®šçš„å‡½æ•°(åˆ†åˆ«ä¸ºé™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•)ã€‚è¿˜å¯ä»¥åœ¨å‡½æ•°ï¼ˆåµŒå¥—æˆ–å±€éƒ¨å‡½æ•°ï¼‰ä¸­åˆ›å»ºå‡½æ•°ã€‚

* åŒæ ·ï¼Œ`Dart`æ”¯æŒ`top-level`å˜é‡ ä»¥åŠä¸ç±»æˆ–å¯¹è±¡å…³è”çš„å˜é‡(é™æ€å˜é‡å’Œå®ä¾‹å˜é‡)ã€‚ å®ä¾‹å˜é‡æœ‰æ—¶ç§°ä¸ºå­—æ®µæˆ–å±æ€§ã€‚

* ä¸`Java`ä¸åŒï¼Œ`Dart`æ²¡æœ‰å…³é”®å­—`public`ï¼Œ`protected`å’Œ`private`ã€‚å¦‚æœæ ‡è¯†ç¬¦ä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼Œåˆ™å®ƒæ˜¯å…¶åº“çš„ä¸“ç”¨æ ‡è¯†ç¬¦ã€‚

* æ ‡è¯†ç¬¦å¯ä»¥ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¼€å¤´ï¼Œç„¶åæ˜¯è¿™äº›å­—ç¬¦åŠ æ•°å­—çš„ä»»æ„ç»„åˆã€‚

* `Dart` æ—¢æœ‰è¡¨è¾¾å¼(å…·æœ‰`runtime`å€¼)åˆæœ‰è¯­å¥(å…·æœ‰`runtime`å€¼)ã€‚å¦‚ï¼Œæ¡ä»¶è¡¨è¾¾å¼ `condition ? expr1 : expr2`ã€‚ if-elseè¯­å¥ã€‚

* `Dart tools`å¯ä»¥æŠ¥å‘Šä¸¤ç§é—®é¢˜ï¼šè­¦å‘Šå’Œé”™è¯¯ã€‚

## å˜é‡

å¦‚ä¸‹åˆ›å»ºå˜é‡å¹¶å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–

```Dart
// ç”±äºç±»å‹æ¨æ–­ï¼ŒDartå»ºè®®å±€éƒ¨å˜é‡ç”¨ var å£°æ˜
// åä¸º`name`çš„å˜é‡ åŒ…å« å¯¹å€¼ä¸º`'xiaoming'`çš„`String` å¯¹è±¡çš„å¼•ç”¨ã€‚
var name = 'xiaoming';
// ç±»å‹æ³¨é‡Šï¼Œæ˜¾å¼å£°æ˜å°†è¦æ¨æ–­çš„ç±»å‹
String str = 'xiaoming';
```

## é»˜è®¤å€¼

å…·æœ‰ å¯ä¸ºç©ºç±»å‹çš„æœªåˆå§‹åŒ–å˜é‡ çš„åˆå§‹å€¼ä¸º `null`ã€‚ï¼ˆå¦‚æœä½ æœªé€‰æ‹©ä½¿ç”¨`null safety`ï¼Œåˆ™æ¯ä¸ªå˜é‡éƒ½å…·æœ‰å¯ä¸º`null`çš„ç±»å‹ã€‚ï¼‰å³ä½¿æ•°å­—ç±»å‹çš„å˜é‡æœ€åˆä¹Ÿä¸º`null`ï¼Œå› ä¸ºæ•°å­—ï¼ˆå¦‚`Dart`ä¸­çš„æ‰€æœ‰å…¶ä»–å†…å®¹ï¼‰éƒ½æ˜¯å¯¹è±¡ã€‚

```Dart
int? age;
print(age == null);   // æ‰“å°ï¼štrue

// å¦‚æœå¯ç”¨ `null safety`ï¼Œåˆ™å¿…é¡»åœ¨ä½¿ç”¨éç©ºå˜é‡ä¹‹å‰ å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼š
int lineCount = 0;
```

ä¸å¿…åœ¨å£°æ˜äº†è¯¥å˜é‡çš„åœ°æ–¹åˆå§‹åŒ–**å±€éƒ¨å˜é‡**ï¼Œä½†æ˜¯ä½ å¿…é¡»åœ¨ä½¿ç”¨å®ƒä¹‹å‰ä¸ºå…¶åˆ†é…ä¸€ä¸ªå€¼ã€‚

```Dart
void test() {
  int x;
  // print($x);    // ä¼šæŠ›å¼‚å¸¸
  x = 20;
  print('$x');    // æ‰“å°ï¼š20
}
```

## late å˜é‡

Dart 2.12æ·»åŠ äº† `Late` ä¿®é¥°ç¬¦ï¼Œå®ƒå…·æœ‰ä¸¤ä¸ªç”¨ä¾‹ï¼š
* å£°æ˜ä¸€ä¸ª åœ¨å£°æ˜ååˆå§‹åŒ–çš„ ä¸å¯ä¸º`null`å˜é‡ã€‚
* å»¶è¿Ÿ(æ‡’)åˆå§‹åŒ–å˜é‡ã€‚

`Dart` çš„æ§åˆ¶æµåˆ†æåœ¨ä½¿ç”¨éç©ºå˜é‡ä¹‹å‰ï¼Œå¯ä»¥æ£€æµ‹è¯¥å˜é‡ä½•æ—¶è®¾ç½®ä¸ºénullå€¼ï¼Œä½†æœ‰æ—¶åˆ†æä¼šå¤±è´¥ã€‚å¸¸è§çš„ä¸¤ç§æƒ…å†µæ˜¯`top-level`å˜é‡å’Œå®ä¾‹å˜é‡ï¼š`Dart`é€šå¸¸æ— æ³•ç¡®å®šæ˜¯å¦è®¾ç½®äº†å®ƒä»¬ï¼Œæ‰€ä»¥å®ƒä¸ä¼šå°è¯•åˆ†æã€‚

```Dart
// å¦‚æœä¸ä½¿ç”¨lateä¿®é¥°ï¼Œåˆ™ç¼–è¯‘ä¸é€šè¿‡
late String glName;
void test() {
  // å¦‚æœæœªåˆå§‹åŒ–glNameï¼Œåˆ™ä¼šå‘ç”Ÿè¿è¡Œæ—¶é”™è¯¯
  glName = 'å§“å';
  print('$glName');
}
```

åœ¨å˜é‡å£°æ˜æ—¶å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–æ—¶å°†å˜é‡æ ‡è®°ä¸º`late`ï¼Œåˆ™åˆå§‹åŒ–ç¨‹åºå°†åœ¨é¦–æ¬¡ä½¿ç”¨è¯¥å˜é‡æ—¶è¿è¡Œã€‚è¿™ç§å»¶è¿Ÿåˆå§‹åŒ–åœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä¸‹éå¸¸æ–¹ä¾¿ï¼š
* å¯èƒ½ä¸éœ€è¦è¯¥å˜é‡ï¼Œå¹¶ä¸”åˆå§‹åŒ–å®ƒçš„æˆæœ¬å¾ˆé«˜ã€‚
* ä½ æ­£åœ¨åˆå§‹åŒ–å®ä¾‹å˜é‡ï¼Œå¹¶ä¸”å…¶åˆå§‹åŒ–ç¨‹åºéœ€è¦å¯¹æ­¤å˜é‡è¿›è¡Œè®¿é—®ã€‚

```Dart
late var sum = 10;
// do some ...
// ä½¿ç”¨sumæ—¶ï¼Œæ‰ä¼šåˆå§‹åŒ–
print('$sum');  // æ‰“å°ï¼š10
```

## final å’Œ const (å¸¸é‡)

å¦‚æœä»æœªæ‰“ç®—æ›´æ”¹å˜é‡ï¼Œè¯·ä½¿ç”¨`final`æˆ–`const`æ›¿ä»£`var`ï¼Œæˆ–æ”¾åœ¨ç±»å‹æ³¨é‡Šçš„åé¢ã€‚`final`å˜é‡åªèƒ½è®¾ç½®ä¸€æ¬¡ï¼›`const`å˜é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œ`const`å˜é‡æ˜¯éšå¼çš„`final`ã€‚`final top-level`å˜é‡ æˆ– ç±»å˜é‡åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶è¢«åˆå§‹åŒ–ã€‚

> å®ä¾‹å˜é‡å¯ä»¥æ˜¯ `final` å˜é‡ï¼Œä½†ä¸èƒ½æ˜¯`const`å˜é‡ã€‚

```Dart
final name = "zhangsan";    // æ²¡æœ‰ç±»å‹ä¿®é¥°
final String subName;
subName = "lisi";       // åªèƒ½è®¾ç½®ä¸€æ¬¡
```

å¯¹è¦ç”¨ä½œ`compile-time constants`(ç¼–è¯‘æ—¶å¸¸é‡)çš„å˜é‡ä½¿ç”¨`const`ã€‚å¦‚æœ`const`å˜é‡åœ¨ç±»çº§åˆ«ï¼Œåˆ™å°†å…¶æ ‡è®°ä¸º`static const`ã€‚åœ¨å£°æ˜å˜é‡çš„åœ°æ–¹ï¼Œå°†å€¼è®¾ç½®ä¸º`compile-time constant`ï¼š

```Dart
const num = 10;
const int num2 = num * 10;
// const å˜é‡åªèƒ½å®šä¹‰æ—¶è®¾ç½®å€¼ï¼Œå¦‚ä¸‹æ³¨é‡Šé”™è¯¯
//   const int num3;  
//   num3 = 100;
print('$num $num2');
```

`const`å…³é”®å­—ä¸ä»…ç”¨äºå£°æ˜å¸¸é‡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºå¸¸é‡å€¼ï¼Œä»¥åŠå£°æ˜åˆ›å»ºå¸¸é‡å€¼çš„æ„é€ å‡½æ•°ã€‚ä»»ä½•å˜é‡éƒ½å¯ä»¥æœ‰ä¸€ä¸ªå¸¸é‡å€¼ã€‚

```Dart
var num = const [3];
print(num == [3]);    // æ‰“å°ï¼šfalse
num = [10];     // å³ä½¿å˜é‡åŸæ¥æ¥æ”¶ä¸€ä¸ªå¸¸é‡ï¼Œä½†ä»ç„¶å¯ä»¥æ›´æ”¹
final foo = const [3];
print("$foo");    // æ‰“å°ï¼š[3]
const bar = [];   // ç›¸å½“äº `const []`
```

## å†…ç½®ç±»å‹

`Dart`è¯­è¨€å¯¹ä»¥ä¸‹å„é¡¹å…·æœ‰ç‰¹æ®Šæ”¯æŒï¼š

* `Numbers`(æ•°å€¼å‹ï¼šintã€double)ã€
* `Strings`(`String`)ã€
* `Booleans`(`bool`)ã€
* `Lists`(`List`)ã€
* `Sets` (`Set`)ã€
* `Maps`(`Map`)ã€
* `Runes` (Runes; often replaced by the characters API)
* `Symbols` (`Symbol`)
* The value null (`Null`)

`Dart`æ”¯æŒä½¿ç”¨`literal`åˆ›å»ºå¯¹è±¡çš„èƒ½åŠ›ã€‚å¦‚ï¼Œ`"a string"`æ˜¯`string literal`ï¼Œè€Œ`true`æ˜¯`boolean literal`ã€‚

å› ä¸º`Dart`ä¸­çš„æ¯ä¸ªå˜é‡éƒ½å¼•ç”¨ä¸€ä¸ªå¯¹è±¡(å³ä¸€ä¸ªç±»çš„å®ä¾‹)ï¼Œæ‰€ä»¥é€šå¸¸å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å˜é‡ã€‚ä¸€äº›å†…ç½®ç±»å‹å…·æœ‰è‡ªå·±çš„æ„é€ å‡½æ•°ã€‚å¦‚ï¼Œå¯ä»¥ä½¿ç”¨`Map()`æ„é€ å‡½æ•°æ¥åˆ›å»º`map`ã€‚

å…¶ä»–ä¸€äº›ç±»å‹åœ¨ `Dart` è¯­è¨€ä¸­ä¹Ÿå…·æœ‰ç‰¹æ®Šä½œç”¨ï¼š
* `Object`ï¼šæ˜¯é™¤ `Null` å¤–çš„æ‰€æœ‰`Dart`ç±»çš„çˆ¶ç±»ã€‚
* `Future` å’Œ `Stream`ï¼šç”¨äºå¼‚æ­¥æ”¯æŒã€‚
* `Iterable`ï¼šç”¨äº`for-in`å¾ªç¯å’ŒåŒæ­¥`generator functions`ã€‚
* `Never`ï¼šè¡¨ç¤ºè¡¨è¾¾å¼æ°¸è¿œæ— æ³•æˆåŠŸå®Œæˆè®¡ç®—ã€‚æœ€å¸¸ç”¨äºæ€»æ˜¯æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ã€‚
* `dynamic`ï¼šæŒ‡ç¤ºç¦ç”¨é™æ€æ£€æŸ¥ï¼Œå°†ç±»å‹æ£€æŸ¥æ¨è¿Ÿåˆ°è¿è¡Œæ—¶ã€‚é€šå¸¸åº”è¯¥ä½¿ç”¨`Object` æˆ– `Object?`ä»£æ›¿ã€‚
* `void`ï¼šè¡¨ç¤ºè¯¥å€¼æ°¸è¿œä¸ä¼šè¢«ä½¿ç”¨ã€‚é€šå¸¸ç”¨ä½œè¿”å›ç±»å‹ã€‚

### Numbers

`Dart`æ•°å­—æœ‰ä¸¤ç§å½¢å¼ï¼š

* `int`
æ•´æ•°å€¼ä¸å¤§äº64ä½ï¼Œå…·ä½“å–å†³äºå¹³å°ã€‚æ•´æ•°å°±æ˜¯ä¸å¸¦å°æ•°ç‚¹çš„æ•°å­—ï¼Œå¦‚ä¸‹ï¼š

```Dart
var x = 1;
var hex = 0xeeeeee;
print('$x $hex');   // æ‰“å°ï¼š1 15658734
```

* `double`
`IEEE 754`æ ‡å‡†æŒ‡å®šçš„64ä½ï¼ˆåŒç²¾åº¦ï¼‰æµ®ç‚¹æ•°ã€‚å¦‚æœæ•°å­—åŒ…å«å°æ•°ç‚¹ï¼Œåˆ™ä¸º `double`

```Dart
var y = 1.1;
var exponents = 1.42e5;
print('$y , $exponents');   // æ‰“å°ï¼š1.1 , 142000
```

`int`å’Œ`double`éƒ½æ˜¯ `num` çš„å­ç±»å‹ã€‚[num](https://api.dart.dev/stable/2.12.2/dart-core/num-class.html) ç±»å‹åŒ…æ‹¬åŸºæœ¬è¿ç®—ç¬¦ï¼Œå¦‚`+ã€-ã€/ã€*`ç­‰ï¼Œåœ¨å…¶æ–¹æ³•ä¸­è¿˜æœ‰ `abs()`ï¼Œ`ceil()` å’Œ `floor()`ã€‚(åœ¨`int`ç±»ä¸­å®šä¹‰äº†æŒ‰ä½è¿ç®—ç¬¦ï¼Œä¾‹å¦‚`>>`ã€‚) å¦‚æœ`num`åŠå…¶å­ç±»å‹æ²¡æœ‰æ‚¨æƒ³è¦çš„å†…å®¹ï¼Œåˆ™[dart:math](https://api.dart.dev/stable/2.12.2/dart-math/dart-math-library.html)åº“å¯èƒ½ä¼šæœ‰ã€‚

* Numbers å’Œ å­—ç¬¦ä¸²çš„è½¬æ¢

```Dart
var sInt = int.parse('10');
var iStr = 10.toString();

var sDouble = double.parse('1.23');
var dStr = 1.2233.toString();
var dPonitStr = 1.2233.toStringAsFixed(2);
```

* `Literal` numbers æ˜¯ `compile-time` å¸¸é‡. 

```Dart
const msPerSecond = 1000;
```

### Strings

`Dart`å­—ç¬¦ä¸²ï¼ˆå³`String`å¯¹è±¡ï¼‰åŒ…å«ä¸€ç³»åˆ—UTF-16ä»£ç å•å…ƒã€‚å¯ä»¥ä½¿ç”¨ å•å¼•å· æˆ– åŒå¼•å· åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼š

```Dart
var s1 = "string string";
String s2 = 'string string';
```

* å­—ç¬¦ä¸²æ’å€¼

å¯ä»¥ä½¿ç”¨ `${expression}` å°†è¡¨è¾¾å¼çš„å€¼æ”¾åœ¨å­—ç¬¦ä¸²ä¸­ã€‚å¦‚æœè¡¨è¾¾å¼æ˜¯æ ‡è¯†ç¬¦ï¼Œåˆ™å¯ä»¥çœç•¥`{}`ã€‚ä¸ºäº†è·å–ä¸å¯¹è±¡ç›¸å¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œ`Dart`è°ƒç”¨å¯¹è±¡çš„`toString()`æ–¹æ³•ã€‚ 

```Dart
var pi = 3.14;
var s1 = 'start ${pi == 3.1416} to $pi end';
print(s1);    // æ‰“å°ï¼šstart false to 3.14 end
```

* ä½¿ç”¨ ç›¸é‚»çš„` string literals ` æˆ– `+`è¿ç®—ç¬¦æ¥æ‹¼æ¥å­—ç¬¦ä¸²

```Dart
var s1 = 'a'"bb""ccc";
var s2 = 'a' "bb" "ccc";
var s3 = 'a'
"bb"
"ccc";
var s4 = 'a+bb' + 'ccc';
// == è¿ç®—ç¬¦æµ‹è¯•ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰
print('${s1 == s2}, ${s2 == s3}, $s3, $s4');    // æ‰“å°ï¼štrue, true, abbccc, a+bbccc
```

* åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²ï¼šä½¿ç”¨å¸¦ å•å¼•å·æˆ–åŒå¼•å·çš„ ä¸‰å¼•å·

```Dart
var s1 = '''
aaa
bbb
''';
var s2 = """ccc
ddd""";
print("$s1 $s2");
```

* é€šè¿‡åœ¨åŸå§‹å­—ç¬¦ä¸²å‰åŠ  `r` æ¥åˆ›å»º `raw` å­—ç¬¦ä¸²

```Dart
 var s1 = r'aaa \n bbb';
print(s1);      // æ‰“å°ï¼šaaa \n bbb
var s2 = 'aaa \n bbb';
print(s2);
// aaa 
// bbb
```

* `Literal strings`(å­—é¢é‡å­—ç¬¦ä¸²) æ˜¯ `compile-time constants`(ç¼–è¯‘æ—¶å¸¸é‡)ï¼Œåªè¦ä»»ä½•æ’å€¼è¡¨è¾¾å¼æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå³å…¶è®¡ç®—ç»“æœä¸º `null`ã€æ•°å­—ã€`string`æˆ– `boolean`ã€‚

### Booleans

`Dart`ç”¨åä¸º `bool` çš„ç±»å‹è¡¨ç¤ºå¸ƒå°”å€¼ã€‚åªæœ‰ä¸¤ä¸ªå¯¹è±¡å…·æœ‰å¸ƒå°”ç±»å‹ï¼š`boolean literals` çš„ `true` å’Œ `false`ï¼Œå®ƒä»¬éƒ½æ˜¯`compile-time constants`(ç¼–è¯‘æ—¶å¸¸é‡)ã€‚

`Dart` æ˜¯ `type safety`(ç±»å‹å®‰å…¨çš„)ï¼Œå› æ­¤ä¸å…è®¸ä½¿ç”¨ `if (nonbooleanValue)` æˆ– `assert (nonbooleanValue)` è¿™æ ·çš„ä»£ç ï¼Œå³éœ€è¦åƒå¦‚ä¸‹æ˜¾ç¤ºæ£€æŸ¥å€¼ï¼š

```Dart
var res = true;
if (res) {
print('res is true');     // æ‰“å°ï¼šres is true
}
  
var s = '';
assert(s.isEmpty);
  
var pt = 0;
assert(pt <= 0);
  
Object? ber;
assert(ber == null);
  
var meant = 0 / 0;
assert(meant.isNaN);
```

### Lists

åœ¨`Dart`ä¸­ï¼Œæ•°ç»„æ˜¯`List`å¯¹è±¡ï¼Œå› æ­¤å¤§å¤šæ•°äººéƒ½ç§°å…¶ä¸ºåˆ—è¡¨ã€‚

```Dart
var ls1 = [1, 2, 3];
List<String> ls2 = [];
ls2.add('aa');
print('$ls1 $ls2');   // æ‰“å°ï¼š[1, 2, 3] [aa]
```

* å¯ä»¥åœ¨`Dart`é›†åˆ `literal`çš„æœ€åä¸€é¡¹åé¢æ·»åŠ é€—å·ã€‚é€—å·ç»“å°¾ä¸ä¼šå½±å“é›†åˆï¼Œä½†å¯ä»¥å¸®åŠ©é˜²æ­¢å¤åˆ¶ç²˜è´´é”™è¯¯ã€‚

```Dart
var ls1 = [1, 2, 3, ];
print(ls1);   // æ‰“å°ï¼š[1, 2, 3]
```

* è·å– `list` çš„é•¿åº¦ å’Œ ç´¢å¼•

```Dart
var ls1 = [1, 2, 3];
print(ls1.length);    // æ‰“å°ï¼š3
print(ls1[0]);    // æ‰“å°ï¼š1
```

* é€šè¿‡åœ¨ `list literal` å‰é¢åŠ  `const` æ¥åˆ›å»º `compile-time constant` çš„ `list`

```Dart
 var ls1 = const [1, 2, 3];
ls1[1] = 2;   // è¿è¡Œé”™è¯¯ï¼Œåç»­ä»£ç ä¸ä¼šæ‰§è¡Œ

const List ls2 = [1, 2, 3];
ls2[1] = 2;   // è¿è¡Œé”™è¯¯ï¼Œåç»­ä»£ç ä¸ä¼šæ‰§è¡Œ
```

* Dart 2.3å¼•å…¥äº† `spread operator (...)` å’Œ `null-aware spread operator (...?)`ï¼Œå®ƒä»¬æä¾›äº†å°†å¤šä¸ªå€¼æ’å…¥åˆ°é›†åˆä¸­çš„ç®€æ´æ–¹æ³•ã€‚

ä½¿ç”¨ `spread operator (...)` å°†ä¸€ä¸ª `List` æ‰€æœ‰å€¼æ’å…¥åˆ°å¦ä¸€ä¸ª `List`ï¼š

```Dart
List ls1 = const [1, 2, 3];
var ls2 = [4, 5, 6, ...ls1];
print(ls2);   // æ‰“å°ï¼š[4, 5, 6, 1, 2, 3]
```

å¦‚æœ `null-aware spread operator (...?)` å³è¾¹çš„è¡¨è¾¾å¼å¯èƒ½ä¸ºnullï¼Œåˆ™å¯ä»¥é€šè¿‡ä½¿ç”¨å¯è¯†åˆ«nullçš„æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼Ÿï¼‰æ¥é¿å…å‡ºç°å¼‚å¸¸ï¼š

```Dart
List<int>? ls3;
print(ls3);   // æ‰“å°ï¼šnull
  
List ls4 = [1, 2, 3, ...?ls3];
print(ls4);   // æ‰“å°ï¼š[1, 2, 3]
```

* `Dart` æä¾›äº† `collection if` å’Œ `collection for`ï¼Œå¯ä»¥ä½¿ç”¨ `conditionals (if)` å’Œ `repetition (for)` æ¥æ„å»ºé›†åˆ

```Dart
var res = true;
  
List<int> ls1 = [1, 2, 3, if (res) 123];
print(ls1);     // æ‰“å°ï¼š[1, 2, 3, 123]
```

```Dart
var ls2 = [1, 2, 3];
var ls3 = ['a', for (var i in ls2) "+$i"];
print(ls3);   // æ‰“å°ï¼š[a, +1, +2, +3]
```

### Sets

`Dart`ä¸­çš„ `Set` æ˜¯æ— åºçš„ã€å”¯ä¸€é¡¹é›†åˆã€‚ é›†æ–‡å­—å’Œé›†ç±»å‹ä¸ºé›†æä¾›Dartæ”¯æŒã€‚

ä½¿ç”¨ `set literal` åˆ›å»º `set`ï¼š

```Dart
Set st1 = {'aa', 'bb', 'cc'};
print(st1);   // æ‰“å°ï¼š{aa, bb, cc}
```

åˆ›å»ºä¸€ä¸ªç©º `Set`:

```Dart
Set<String> st2 = {};
Set st3 = <String>{};
Set st4 = {};
  
print('$st2 $st3 $st4');   // æ‰“å°ï¼š{} {} {}
  
var st5 = {};   // æ³¨æ„ï¼šè¿™æ˜¯åˆ›å»ºä¸€ä¸ª mapï¼Œè€Œä¸æ˜¯ Set
```

* ä½¿ç”¨ `add()` æˆ– `addAll()` å‘ `Set` ä¸­æ·»åŠ  item

```
var st0 = {'11', '22', '33'};
var st1 = <String>{};
Set st2 = {};
  
st1.add('aa');
st1.addAll(st0);
print(st1);   // æ‰“å°ï¼š{aa, 11, 22, 33}
  
st2.add(1);
st2.addAll(st0);
print(st2);   // æ‰“å°ï¼š{1, 11, 22, 33}

// ä½¿ç”¨ length è·å–itemçš„ä¸ªæ•°
print('${st2.length}');   // æ‰“å°ï¼š4
```

* åˆ›å»º `compile-time constant`(ç¼–è¯‘æ—¶å¸¸é‡) `Set`

```Dart
final Set st1 = const {1, 4, 5};
//   st1.add(3);
  
const Set st2 = {1, 2, 3};
//   st2.add(4);
```

* `Set` å’Œ `List` ä¸€æ ·ï¼Œéƒ½æ”¯æŒ `spread operators (... and ...?) ` å’Œ `collection if` å’Œ `for`.

```Dart
Set st1 = const {1, 4, 5};
Set<int> st2 = {3, 9, ...st1};
print(st2);   // æ‰“å° {3, 9, 1, 4, 5}
  
Set<int>? st3;
var st4 = {9, 2, 12, ...?st3};
print(st4);   // æ‰“å°ï¼š{9, 2, 12}
```

```Dart
const res = false;
var st1 = {1, 2, 3, if (res == false) 6};
print(st1);   // æ‰“å°ï¼š{1, 2, 3, 6}
  
var st2 = {"a", "b", for (var i in st1) "+$i"};
print(st2);   // æ‰“å°ï¼š{a, b, +1, +2, +3, +6}
```

### Maps

`map`(æ˜ å°„)æ˜¯`keys-values`å…³è”çš„å¯¹è±¡ã€‚ `keys`å’Œ`values`éƒ½å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚ æ¯ä¸ª`key`ä»…å‡ºç°ä¸€æ¬¡ï¼Œç›¸åŒçš„`value`å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚`Dart`å¯¹`maps`æä¾›`map literals`å’Œ`map type`çš„æ”¯æŒã€‚

* é€šè¿‡ `map literals` åˆ›å»º `Map`

```Dart
var mp1 = {"s1": 1, "s2": 3};
var mp2 = {1: 1, 2: 3};
print("$mp1 $mp2");     // æ‰“å°ï¼š{s1: 1, s2: 3} {1: 1, 2: 3}
```

* ä½¿ç”¨ `Map` æ„é€ å‡½æ•°åˆ›å»º

```Dart
var mp1 = Map<String, int>();
mp1['s1'] = 10;
mp1['s2'] = 20;
print(mp1);     // æ‰“å°ï¼š{s1: 10, s2: 20}
```

* ä» `Map` ä¸­æ£€ç´¢å€¼ï¼Œ`length`è·å–`Map`é”®å€¼å¯¹çš„æ•°é‡

```Dart
var mp = {'s1': 10, 's2': 20};
print('${mp['s1']} ${mp['s3']}');   // æ‰“å°ï¼š10 null
print(mp.length);   // æ‰“å°ï¼š2
```

* åœ¨ `map literal` å‰é¢åŠ  `const` æ¥åˆ›å»º`compile-time constant` çš„ `map`

```Dart
final mp = const {'s1': 10, 's2': 20};
```

* å’Œ `List` ä¸€æ ·ï¼Œ`Map`æ”¯æŒ `spread operators (... å’Œ ...?)` ä»¥åŠ ` collection if å’Œ for`

```Dart
final mp = const {'s1': 10, 's2': 20};
var mp1 = {"s3": 30, ...mp};
print(mp1);   // æ‰“å°ï¼š{s3: 30, s1: 10, s2: 20}
  
Map<String, int>? mpp;
var mp2 = {"s3": 33, ...?mpp};
print(mp2);   // æ‰“å°ï¼š{s3: 33}
```

```Dart
const res = true;
var mp1 = {"23": "aa", if (res) "33": "bbb"};
print(mp1);     // æ‰“å°ï¼š{23: aa, 33: bbb}
```

## Runes å’Œ grapheme clusters

åœ¨`Dart`ä¸­ï¼Œ[runes](https://api.dart.dev/stable/2.12.2/dart-core/Runes-class.html)å…¬å¼€å­—ç¬¦ä¸²çš„`Unicode code points`(ç ä½)ã€‚å¯ä»¥ä½¿ç”¨[characters package](https://pub.dev/packages/characters)æ¥æŸ¥çœ‹æˆ–æ“ä½œ`user-perceived characters`(ç”¨æˆ·ç†è§£çš„å­—ç¬¦)ï¼Œä¹Ÿç§°ä¸ºUnicodeï¼ˆæ‰©å±•ï¼‰` grapheme clusters`(å­—ç¬¦ç°‡)ã€‚

`Unicode`ä¸ºä¸–ç•Œä¸Šæ‰€æœ‰ä¹¦å†™ç³»ç»Ÿä¸­ä½¿ç”¨çš„æ¯ä¸ªå­—æ¯ã€æ•°å­—å’Œç¬¦å·å®šä¹‰äº†å”¯ä¸€çš„æ•°å€¼ã€‚ç”±äº`Dart`å­—ç¬¦ä¸²æ˜¯`UTF-16`ä»£ç å•å…ƒçš„åºåˆ—ï¼Œå› æ­¤åœ¨å­—ç¬¦ä¸²ä¸­è¡¨ç¤º`Unicode code points`éœ€è¦ç‰¹æ®Šçš„è¯­æ³•ã€‚è¡¨ç¤º`Unicode code point`å¸¸ç”¨çš„æ–¹æ³•æ˜¯`\uXXXX`ï¼Œå…¶ä¸­`XXXX`æ˜¯4ä½åå…­è¿›åˆ¶å€¼ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ï¼ˆâ™¥ï¼‰ä¸º`\u2665`ã€‚è¦æŒ‡å®šå¤šäºæˆ–å°‘äº4ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼Œè¯·å°†å€¼æ”¾åœ¨å¤§æ‹¬å·ä¸­ã€‚ä¾‹å¦‚ï¼Œç¬‘çš„è¡¨æƒ…ç¬¦å·ï¼ˆğŸ˜†ï¼‰ä¸º`\u{1f606}`ã€‚

å¦‚æœéœ€è¦è¯»å–æˆ–ç¼–å†™å•ä¸ª`Unicode characters`ï¼Œè¯·ä½¿ç”¨`characters package`åœ¨`String`ä¸Šå®šä¹‰çš„`characters getter`ã€‚è¿”å›çš„`Characters`å¯¹è±¡æ˜¯ä½œä¸º`grapheme clusters`åºåˆ—çš„å­—ç¬¦ä¸²ã€‚

æœ‰å…³ä½¿ç”¨`character package`æ“ä½œå­—ç¬¦ä¸²çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§`character package`çš„[example](https://pub.dev/packages/characters/example)å’Œ [API reference](https://pub.dev/documentation/characters/latest/)ã€‚

å¦‚ä¸‹characters APIçš„ç¤ºä¾‹ï¼š

```Dart
import 'package:characters/characters.dart';
...
var hi = 'Hi ğŸ‡©ğŸ‡°';
print(hi);
print('The end of the string: ${hi.substring(hi.length - 1)}');
print('The last character: ${hi.characters.last}\n');
```

## Symbols

[Symbol](https://api.dart.dev/stable/2.12.2/dart-core/Symbol-class.html) å¯¹è±¡ä»£è¡¨åœ¨ `Dart` ç¨‹åºä¸­å£°æ˜çš„è¿ç®—ç¬¦æˆ–æ ‡è¯†ç¬¦ã€‚å¯èƒ½æ°¸è¿œä¸éœ€è¦ä½¿ç”¨`symbols`ï¼Œä½†æ˜¯`symbols`å¯¹äºæŒ‰åç§°å¼•ç”¨æ ‡è¯†ç¬¦çš„APIæ¥è¯´æ˜¯éå¸¸å®è´µçš„ï¼Œå› ä¸ºæœ€å°åŒ–ä¼šæ›´æ”¹æ ‡è¯†ç¬¦åç§°ï¼Œä½†ä¸ä¼šæ›´æ”¹æ ‡è¯†ç¬¦ç¬¦å·ã€‚

è¦è·å–æ ‡è¯†ç¬¦çš„`symbol`å·ï¼Œè¯·ä½¿ç”¨`symbol literal`ï¼Œå®ƒåªæ˜¯`#`åè·Ÿæ ‡è¯†ç¬¦ï¼šï¼š

`symbol literals` æ˜¯ `compile-time constants`ã€‚

```Dart
#radix
#bar
```


## å­¦ä¹ èµ„æº

[Dart æ¦‚è¿° * è‹±æ–‡](https://dart.dev/overview)

[Dart ç¼–ç¨‹è¯­è¨€æ¦‚è§ˆ * ä¸­æ–‡](https://www.dartcn.com/guides/language/language-tour)

[DartPad](https://dart.dev/tools/dartpad)